.code-with-lines {
  display: flex;
  align-items: stretch;
  overflow: auto;
  border: 1px solid var(--bs-border-color, rgba(0, 0, 0, 0.08));
  border-radius: 0.5rem;
  background: var(--sp-code-bg, #f6f8fa);
}

.code-with-lines .code-ln {
  margin: 0;
  padding: 0.75rem 0.6rem;
  min-width: 3.25rem;
  text-align: right;
  user-select: none;
  color: var(--bs-tertiary-color, rgba(0, 0, 0, 0.55));
  border-right: 1px solid var(--bs-border-color, rgba(0, 0, 0, 0.08));
  position: sticky;
  left: 0;
  background: var(--sp-code-bg, #f6f8fa);
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  font-size: 0.9rem;
  line-height: 1.35;
  white-space: pre;
}

.code-with-lines .code-src {
  padding: 0.75rem;
  min-width: 0;
}

.code-with-lines .code-src pre {
  margin: 0;
}

/* Match gutter metrics (font-size/line-height) so line numbers align with code lines. */
.code-with-lines .code-src pre,
.code-with-lines .code-src pre code,
.code-with-lines .code-src pre code.hljs {
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  font-size: 0.9rem;
  line-height: 1.35;
  white-space: pre;
}

/* highlight.js should not add its own padding/background inside our bordered container. */
.code-with-lines pre code.hljs {
  padding: 0;
  background: transparent;
}

.code-editor .sp-code-textarea {
  flex: 1 1 auto;
  min-width: 0;
  border: 0;
  outline: none;
  resize: vertical;
  padding: 0.75rem;
  background: transparent;
  color: var(--bs-body-color, #24292f);
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  font-size: 0.9rem;
  line-height: 1.35;
  white-space: pre;
  overflow: auto;
}

.code-editor .code-ln {
  /* Keep gutter aligned with textarea padding. */
  padding-top: 0.75rem;
  padding-bottom: 0.75rem;
  overflow: auto;
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* IE/Edge legacy */
}

.code-editor .code-ln::-webkit-scrollbar {
  width: 0;
  height: 0;
}
